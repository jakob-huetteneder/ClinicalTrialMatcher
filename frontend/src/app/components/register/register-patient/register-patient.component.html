<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Register Patient</title>
</head>

<div class="fw-bold grid grid-cols-1 justify-items-center container mt-3 ml-3 text-in-button">
  <div class="text-xl mb-3 mt-3">Welcome to ClinicalMatcher!</div>
</div>

<div class="whitebox flex justify-center container mb-10">
  <div class="fw-bold grid grid-cols-1 justify-items-center container mt-3 ml-3">
    <div class="text-lg">Register new Patient</div>
  </div>

  <hr class="container">

  <div class="container lg:grid lg:grid-cols-2 flex flex-col">
    <div class="flex flex-row">
      <div class="flex flex-col flex-initial">
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-person-fill mr-2"></i></div>
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-envelope-at-fill mr-2"></i></div>
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-calendar3-event mr-2"></i></div>
      </div>
      <div class="flex flex-col flex-initial">
        <div class="font-semibold mb-3 mt-3">First Name:</div>
        <div class="font-semibold mb-3 mt-3">E-Mail:</div>
        <div class="font-semibold mb-3 mt-3">Birthdate:</div>
      </div>
      <div class="flex flex-col flex-1">
        <input type="text" placeholder="Enter Patient's First Name"
               class="lg:ml-5 ml-10 mr-5 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(fNameModel)"
               [(ngModel)]="toRegister.firstName" #fNameModel="ngModel">
        <input type="email" placeholder="Enter Patient's E-Mail"
               class="lg:ml-5 ml-10 mr-5 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(emailModel)"
               [(ngModel)]="toRegister.email" #emailModel="ngModel">
        <input type="date" placeholder="Enter Patient's Date of Birth"
               class="lg:ml-5 ml-10 mr-5 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(dobModel)"
               [(ngModel)]="toRegister.birthdate" #dobModel="ngModel">
      </div>
    </div>

    <div class="flex flex-row">
      <div class="flex flex-col flex-initial">
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-person-fill mr-2"></i></div>
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-envelope-at-fill mr-2"></i></div>
        <div class="fw-bold mb-3 mt-3"><i class="bi bi-gender-ambiguous mr-2"></i></div>
      </div>
      <div class="flex flex-col flex-initial">
        <div class="font-semibold mb-3 mt-3">Last Name:</div>
        <div class="font-semibold mb-3 mt-3">Repeat E-Mail:</div>
        <div class="font-semibold mb-3 mt-3">Gender:</div>
      </div>
      <div class="flex flex-col flex-1">
        <input type="text" placeholder="Enter Patient's Last Name" class="ml-5 mr-5 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(lNameModel)"
               [(ngModel)]="toRegister.lastName" #lNameModel="ngModel">
        <input type="email" placeholder="Repeat Patient's E-Mail" class="ml-5 mr-5 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(emailModel)"
               [(ngModel)]="checkmail" #emailModel="ngModel">
        <select class="inputfield border-0 ml-5 mr-5 h-10 mb-2 mt-2 hover:cursor-pointer"
                id="gender"
                name="gender"
                style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGZpbGw9J25vbmUnIHZpZXdCb3g9JzAgMCAyNCAyNCcgc3Ryb2tlLXdpZHRoPScxLjUnIHN0cm9rZT0nIzc4OThiZCcgY2xhc3M9J3ctNiBoLTYnPjxwYXRoIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgc3Ryb2tlLWxpbmVqb2luPSdyb3VuZCcgZD0nTTE5LjUgOC4yNWwtNy41IDcuNS03LjUtNy41JyAvPjwvc3ZnPgo=');                        background-position: right 0.5rem center;
                        background-repeat: no-repeat;
                        background-size: 1.5em 1.5em;"
                [(ngModel)]="this.toRegister.gender">
          <option value="FEMALE">Female</option>
          <option value="MALE">Male</option>
        </select>
      </div>
    </div>
  </div>

  <hr class="container">

  <div class="container flex flex-col">
    <div>
      <div class="flex flex-row">
        <div class="flex flex-row flex-initial">
          <div class="fw-bold mb-2 mt-1"><i class="bi bi-journals mr-2"></i></div>
        </div>
        <div class="flex flex-col flex-initial">
          <div class="font-semibold mb-1 mt-1 mr-1">
            Admission Note
          </div>
        </div>
      </div>
      <div class="flex flex-row">
        <div class="flex flex-col flex-1">
          <textarea maxlength="1000" class="mr-5 h-10 mb-2 inputfield border-0 min-h-[5rem]"
                    placeholder="Enter the admission notes for your patient"
                    [class]="dynamicCssClassesForInput(admissionModel)"
                    [(ngModel)]="toRegister.admissionNote" #admissionModel="ngModel"></textarea>
        </div>
        <div class="flex flex-row flex-initial">
          <button (click)="submit()" [disabled]="this.toRegister.admissionNote === ''"
                  class="{{buttonstyleAdmission()}} rounded w-35 p-2 h-10 mr-5 text-white">
            Analyze Note
          </button>
        </div>
      </div>
    </div>
  </div>

  <hr class="container">

  <div class="container flex flex-col">
    <div class="flex flex-row">
      <div class="flex flex-row flex-initial">
        <div class="fw-bold mb-2 mt-1"><i class="bi bi-activity mr-2"></i></div>
      </div>
      <div class="flex flex-col flex-initial">
        <div class="font-semibold mb-1 mt-1 mr-1">
          Diagnoses
        </div>
      </div>
      <div class="flex flex-row flex-initial">
        <div (click)="add()" class="fw-bold mb-2 mt-1 hover:cursor-pointer"><i class="bi bi-plus-lg ml-2"></i></div>
      </div>
    </div>
    <div class="flex lg:flex-row flex-col" *ngFor="let diagnosis of toRegister.diagnoses">
      <div class="flex flex-col flex-1">
        <app-autocomplete
          class="flex-1 flex flex-row"
          name="disease"
          [(ngModel)]="diagnosis.disease"
          [formatModel]="formatDiseaseName"
          [suggestions]="diseaseSuggestions"
        ></app-autocomplete>
      </div>
      <div class="flex flex-col flex-1">
          <textarea maxlength="1000" type="text" placeholder="Notes"
                    class="min-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
                    [class]="dynamicCssClassesForInput(diagNote)"
                    [(ngModel)]="diagnosis.note" #diagNote="ngModel"></textarea>
      </div>
      <div class="flex flex-col flex-1">
        <input type="date" placeholder="Notes" class="max-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(diagDate)"
               [(ngModel)]="diagnosis.date" #diagDate="ngModel">
      </div>
      <div class="flex flex-col flex-initial">
        <button (click)="remove(diagnosis)" class="rounded w-35 p-2 mt-2 h-10 text-black mr-5 ml-0">
          <i class="bi bi-dash-lg"></i>
        </button>
      </div>
    </div>
  </div>

  <hr class="container">

  <div class="container flex flex-col">
    <div class="flex flex-row">
      <div class="flex flex-row flex-initial">
        <div class="fw-bold mb-2 mt-1"><i class="bi bi-paperclip mr-2"></i></div>
      </div>
      <div class="flex flex-col flex-initial">
        <div class="font-semibold mb-1 mt-1 mr-1">
          Examinations
        </div>
      </div>
      <div class="flex flex-row flex-initial">
        <div (click)="addExam()" class="fw-bold mb-2 mt-1 hover:cursor-pointer"><i class="bi bi-plus-lg ml-2"></i>
        </div>
      </div>
    </div>
    <div class="flex lg:flex-row flex-col" *ngFor="let examination of toRegister.examinations">
      <div class="flex flex-col flex-1">
        <input type="text" placeholder="Name of Examination"
               class="max-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(examName)"
               [(ngModel)]="examination.name" #examName="ngModel">
      </div>
      <div class="flex flex-col flex-1">
          <textarea maxlength="1000" type="text" placeholder="Notes"
                    class="min-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
                    [class]="dynamicCssClassesForInput(examNote)"
                    [(ngModel)]="examination.note" #examNote="ngModel"></textarea>
      </div>
      <div class="flex flex-col flex-1">
        <input type="text" placeholder="Type" class="max-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(examType)"
               [(ngModel)]="examination.type" #examType="ngModel">
      </div>
      <div class="flex flex-col flex-1">
        <input type="date" placeholder="Date of Examination"
               class="max-h-[2.5rem] mr-2 h-10 mb-2 mt-2 inputfield border-0"
               [class]="dynamicCssClassesForInput(examDate)"
               [(ngModel)]="examination.date" #examDate="ngModel">
      </div>
      <div class="flex flex-col flex-initial">
        <button (click)="removeExam(examination)" class="rounded w-35 p-2 mt-2 h-10 text-black mr-5 ml-0">
          <i class="bi bi-dash-lg"></i>
        </button>
      </div>
    </div>
  </div>

  <button (click)="submit()" [disabled]="disable()"
          class="{{buttonstyle()}} rounded w-35 p-2 mt-2 h-10 text-white">
    Complete Registration
  </button>

</div>
