<div class="whitebox flex justify-center container mt-5 text-blue-950 relative">
  <div class="fw-bold grid grid-cols-1 justify-items-center container mt-3 ml-3">
    <div class="text-lg">My Trials</div>
  </div>

  <hr class="container">

  <div class="flex flex-col divide-y-[3px] w-[96%] mx-auto divide-[#CDE2F0]/[0.25]">
    <div *ngFor="let trial of trials" class="py-2">

      <div class="container grid grid-cols-2 align-items-center">
        <div class="flex flex-row align-items-center">
          <div class="flex flex-col">
            <div class="fw-bold text-cool-blue-500">{{trial.title}}</div>
          </div>
          <div class="flex flex-col">
            <div class="text-sm font-semibold text-cool-blue-500 ml-4"><i
              class="bi bi-geo-alt-fill mr-1"></i>{{trial.location}}</div>
          </div>
        </div>

        <div class="flex flex-row dateloc">
          <div class="text-sm font-semibold text-cool-blue-500">
            <i class="bi bi-calendar-week mr-2"></i>
            {{trial.startDate | date: 'dd.MM.yyyy'}} - {{trial.endDate | date: 'dd.MM.yyyy'}}
          </div>
        </div>

      </div>

      <div class="container">
        <div class="flex flex-row">
          <div class="font-semibold mr-3">Details:</div>
          <div>{{trial.briefSummary}}</div>
        </div>
      </div>

      <div class="container grid grid-cols-2 align-items-center">
        <div class="flex flex-row">

          <div class="flex flex-col">
            <div class="flex flex-row">
              <div class="font-semibold mr-3">
                Requirements:
              </div>
              <div>Age: {{trial.crMinAge}} - {{trial.crMaxAge}}, Gender: {{trial.crGender}}</div>
            </div>
            <div class="flex flex-row">
              <div class="font-semibold mr-3">
                Status:
              </div>
              <div>{{trial.status}}</div>
            </div>
          </div>
        </div>
        <!-- Adding to list -->
        <div class="flex flex-row dateloc">
          <a class="group relative dropdown cursor-pointer tracking-wide pb-2 flex flex-row">
            <div class="text-in-button mt-1">Add to list</div>
            <i class="bi-chevron-down w-4 text-blue-950"></i>
            <div
              class="absolute z-[1000] mt-4 hidden list-none overflow-hidden rounded-lg bg-white opacity-85 backdrop-blur-md shadow-md group-hover:block right-0">
              <ul class="w-auto px-2 py-2 mb-0">
                <li *ngFor="let trialList of allLists" class="flex flex-row justify-between items-center gap-2">
                  <a
                    class="block whitespace-nowrap bg-transparent no-underline py-2 text-sm font-normal text-blue-950 hover:bg-blue-400"
                    (click)="addTrialToList(trial, trialList)"
                  >{{trialList.name}}</a>
                  <div *ngIf="listContains(trialList, trial)">
                    <app-confirm-button (confirm)="deleteTrialFromList(trial.id, trialList)" details="Trial list will be deleted from {{trialList.name}}.">
                      <a class="text-red-600 hover:text-red-900"
                         aria-label="Delete Trial List">
                        <i class="bi bi-trash"></i>
                      </a>
                    </app-confirm-button>
                  </div>
              </ul>
            </div>
          </a>
        </div>
      </div>

    </div>
  </div>

</div>
